<template>
  <FormSpecimen :type="type" @save="onSave" />
</template>

<script setup lang="ts">
import { type EntityJSONBody } from 'layers/base/types/entity'
import { type Specimen } from 'types/specimen'

definePageMeta({
  layout: `dashboard`,
})

const type = useRoute().query.type as string ?? `fossil`

const onSave = async (specimen: EntityJSONBody<Specimen>) => {
  const { create } = useEntityType<Specimen>(`Specimen`)
  await create(specimen)
  await navigateTo(`/dashboard/specimens`)
}
</script>
